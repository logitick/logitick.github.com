[{"content":" My name is Paul Daniel Iway Full-stack Developer / Devops Engineer @ Suzerin I\u0026rsquo;ve been developing web applications with PHP for about 6 years now and I work mostly in PHP but I am very open to learning new things.\nNot only can I make web applications, I can also help ensure smooth delivery to production environments by implementing a good delivery pipeline. I use Docker for containerization and Kubernetes for orchestration.\nAt work I use Ansible for setting up our servers.\nTech stack Languages: Go, PHP, JavaScript\nContainerization: Docker, Kubernetes\nDatabase/Data Stores: MySQL/MariaDB, MongoDB, Redis\nTools: Git, Gradle, Composer, NPM\nOperating Systems: Ubuntu, Debian, CentOS\nHit me up at paul.daniel.iway@gmail.com\n","permalink":"https://pdiway.com/about/","summary":"My name is Paul Daniel Iway Full-stack Developer / Devops Engineer @ Suzerin I\u0026rsquo;ve been developing web applications with PHP for about 6 years now and I work mostly in PHP but I am very open to learning new things.\nNot only can I make web applications, I can also help ensure smooth delivery to production environments by implementing a good delivery pipeline. I use Docker for containerization and Kubernetes for orchestration.","title":"About"},{"content":"I\u0026rsquo;m running out of disk space on my laptop. I use Ubuntu as my workhorse installed on a 120GB SSD.\nI also have a Windows OS on dual boot just in case I need it (I very very seldom do) which means my 1TB HDD needs to be NTFS (unfortunately) so I can use the disk from any OS.\nNow as the projects at work pile up, Docker seems to taking up most of the space of my poor little SSD.\nNot as straightforward as it seems but luckily stackoverflow was there to help.\nAfter moving /var/lib/docker to the NTFS filesystem:\nsudo rsync -avxP /var/lib/docker/ /mnt/hdd/var/lib/docker/ All that\u0026rsquo;s needed to do is to update the file: /etc/docker/daemon.json\n{ \u0026quot;data-root\u0026quot;: \u0026quot;/mnt/hdd/var/lib/docker\u0026quot;, \u0026quot;storage-driver\u0026quot;: \u0026quot;devicemapper\u0026quot; } Then start the docker service and voila!\nNow, if only I could do something similar to node_modules.\n","permalink":"https://pdiway.com/articles/how-to-move-docker-data-directory/","summary":"I\u0026rsquo;m running out of disk space on my laptop. I use Ubuntu as my workhorse installed on a 120GB SSD.\nI also have a Windows OS on dual boot just in case I need it (I very very seldom do) which means my 1TB HDD needs to be NTFS (unfortunately) so I can use the disk from any OS.\nNow as the projects at work pile up, Docker seems to taking up most of the space of my poor little SSD.","title":"How to move Docker's data directory to an NTFS filesystem"},{"content":"I keep forgetting how to do this. Now, I’m writing down because the internet never forgets.\nIf you\u0026rsquo;ve been given a bunch of crt files here a the steps to add them to kubernetes.\nBundle up the .crt files If we\u0026rsquo;re going to add the certificate to kubernetes we need to keep them bundled up in one file. If you\u0026rsquo;ve got the already bundled up Certificate Authority (CA) certificates, It\u0026rsquo;s your lucky day. You\u0026rsquo;ll only need to concatenate you\u0026rsquo;re domain\u0026rsquo;s certificate with your CA certificate bundle.\n$ cat example.com.crt \u0026gt;\u0026gt; fullchain.pem $ cat My_CA_Bundle.ca-bundle \u0026gt;\u0026gt; fullchain.pem Lucky bastard. You should skip to adding the certificate to kubernetes\nNo CA Bundle If you don\u0026rsquo;t have the bundled CA certificates, you\u0026rsquo;re going to have to concatenate them yourself but you\u0026rsquo;ll have to follow a specific order in order to not break the chain.\nLet\u0026rsquo;s try and inspect the your domain\u0026rsquo;s certificate.\n$ openssl x509 -text -noout -in example.com.crt It\u0026rsquo;s going to spit out a lot of stuff but the important stuff in the first few lines\nCertificate: Data: ... Issuer: C = US, O = Let's Encrypt, CN = Let's Encrypt Authority ... Subject: CN = example.com ... The certificate issued for your domain always goes first. The next certificate in the chain should have the issuer in the previous certificate as the subject.\nBasically, a valid full chain certificate should follow this pattern\nCertificate: Data: Issuer: Issuer A Subject: CN = example.com Certificate: Data: Issuer: Issuer B Subject: Issuer A Certificate: Data: Issuer: ROOT Issuer Subject: Issuer B Certificate: Data: Issuer: ROOT Issuer Subject: ROOT Issuer After concatenating your certificates into a single file it\u0026rsquo;s now ready to be used by your kubernetes ingress.\nCreate a Kubernetes TLS secret We\u0026rsquo;ll need to create a specific type of secret called tls.\nkubectl create secret tls \u0026lt;secret-name\u0026gt; --key \u0026lt;path-to-key\u0026gt; --cert \u0026lt;path-to-contatenated-certificates\u0026gt; The \u0026lt;path-to-key\u0026gt; is the private key file which should have came with your certificates.\nIn this case, I would run:\nkubectl create secret tls www.example.com --key ./www_example_com.key --cert ./fullchain.pem Use the TLS secret in the ingress Now all that\u0026rsquo;s left to do is to call it from the ingress by its name.\napiVersion: extensions/v1beta1 kind: Ingress metadata: name: example-ingress spec: rules: - host: www.example.com http: paths: - backend: serviceName: my-service servicePort: 80 - host: example.com http: paths: - backend: serviceName: my-service servicePort: 80 tls: - hosts: - www.example.com - example.com secretName: www.example.com Depending on what you use for your ingress, It could take a bit of time before it takes effect.\n https://stackoverflow.com/questions/24153344/peformance-does-ssl-trust-chain-order-matter http://tools.ietf.org/html/rfc5246#section-7.4.2 ","permalink":"https://pdiway.com/articles/add-a-tls-certificate-for-your-kubernetes-ingress/","summary":"\u003cp\u003eI keep forgetting how to do this. Now, I’m writing down because the internet\nnever forgets.\u003c/p\u003e\n\u003cp\u003eIf you\u0026rsquo;ve been given a bunch of \u003ccode\u003ecrt\u003c/code\u003e files here a the steps to add them to\nkubernetes.\u003c/p\u003e","title":"Add a TLS Certificate for Your Kubernetes Ingress"},{"content":"I\u0026rsquo;ve never come across anything like Go\u0026rsquo;s defer in any of the languages I\u0026rsquo;ve worked on before. As far as I know there isn\u0026rsquo;t an equivalent of it in PHP and the closest we have in Java is try-with-resources.\nIf you\u0026rsquo;ve been coding in Go you\u0026rsquo;ve probably used the defer statement plenty of times.\nWith defer, I can put the Close statement immediately after opening. I love it because it helps me never to forget closing that file reader.\nf, err := os.Open(\u0026quot;myfile\u0026quot;) defer f.Close() if err != nil { panic(err) } ... What does it do?  A defer statement defers the execution of a function until the surrounding function returns.\n https://tour.golang.org/flowcontrol/12   A straight and simple definition from A Tour of Go. Any function or method call can be deferred by prepending the keyword. It is usually used for clean-ups like closing a file or a connection.\nAny number of functions can be deferred which will then be executed in a last in first out order when the function that contains the defer statement returns.\nIn action\nfunc greet() { defer fmt.Println(\u0026quot;Good\u0026quot;) defer fmt.Println(\u0026quot;day\u0026quot;) defer fmt.Println(\u0026quot;beautiful\u0026quot;) defer fmt.Println(\u0026quot;person\u0026quot;) fmt.Println(\u0026quot;How are you today?\u0026quot;) // not deferred } Output\nHow are you today? person beautiful day Good It is also good to keep in mind that when deferring a function, it\u0026rsquo;s arguments are evaluated immediately.\nfunc doStuff() { i := 0 defer fmt.Println(i) i++ } Output:\n0 How awesome is defer, right? There\u0026rsquo;s so much more you can do with it. You can even recover from a panic.\nFor me, It is just one of the things that makes Go very enjoyable to write in.\n","permalink":"https://pdiway.com/articles/a-close-look-at-golang-defer/","summary":"\u003cp\u003eI\u0026rsquo;ve never come across anything like Go\u0026rsquo;s \u003ccode\u003edefer\u003c/code\u003e in any of the languages I\u0026rsquo;ve\nworked on before. As far as I know there isn\u0026rsquo;t an equivalent\nof it in PHP and the closest we have in Java is\n\u003ca href=\"https://stackoverflow.com/questions/29788307/what-is-the-defer-equivalent-for-java\"\u003etry-with-resources\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eIf you\u0026rsquo;ve been coding in Go you\u0026rsquo;ve probably used the\n\u003ccode\u003edefer\u003c/code\u003e statement plenty of times.\u003c/p\u003e","title":"A Close Look at Golang's defer"},{"content":"I wrote an article about setting up a pipeline that is similar to what we have at Neso. You can read about it here: https://neso.io/innovation/how-to-setup-a-pipeline-with-codeship-gke\n","permalink":"https://pdiway.com/articles/ci-cd-on-gke-with-codeship/","summary":"I wrote an article about setting up a pipeline that is similar to what we have at Neso. You can read about it here: https://neso.io/innovation/how-to-setup-a-pipeline-with-codeship-gke","title":"How to setup a CI/CD pipeline with Codeship and GKE"}]